inMemory - монолит, который трудно разделить на отдельные части 
Общая бд - проблема в том, что непонятно как версионировать таблицу
HTTP/gRPC - проблемы с сетью и service discovery
Асинхронная передача сообщений - некоторая очередб сообщений
плюсы: 
1) Балансировка нагрузки
2) Асинхронность

Виды MQ систем:
1) AMQP - пример RabbitMQ
2) Pub/Sub - пример Radis pub/sub
3) Облачное решение SQS - пример Yandex Queue (самай удобная и быстрый способ)
4) Распределенный лог - пример Kafka
# KAFKA
была придумана для сохранения данных , но импользуют и для общения сервисов.

В архитектуре Kafka Apache ключевыми являются концепции:
- **продюсер (producer) —** приложение или процесс, генерирующий и посылающий данные (публикующий сообщение);
- **потребитель (consumer)** **—** приложение или процесс, который принимает сгенерированное продюсером сообщение;
- **сообщение —** пакет данных, необходимый для совершения какой-либо операции (например, авторизации, оформления покупки или подписки);
- **брокер —** узел (диспетчер) передачи сообщения от процесса-продюсера приложению-потребителю;
- **топик (тема)** **—** виртуальное хранилище сообщений (журнал записей) одинакового или похожего содержания, из которого приложение-потребитель извлекает необходимую ему информацию.
- Zookeeper - хранит инфу о состоянии kafka
- Партиции привязаны к брокеру
- Фактор репликации - каждое сообщения попадает в несколько брокеров

Итак есть топик, на него все подписываются и начинают слушать, читать сообщения.
Тот, кто читает называется consumer.
Топик разделен на партиции, то есть наши consumer могут читать топик, на который подписали из разных партиций, например, если из 1 и 2 партиций никто не читает, то какой то consumer будет читать одновременно из двух.
![[Pasted image 20231129100820.png]]

## Библиотека - kafka-go
